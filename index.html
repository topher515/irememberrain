
<!DOCTYPE html>
<html>
  <head>

    <title>I Remember Rain</title>

    <style>
        #cover {
          position: absolute;
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
          z-index: 100;
          background-color:black;
          opacity: 0.95;
          color: white;
          font-family: sans-serif;
          text-align: center;
          padding-top: 18%;
        }
        #videoplayer {
          position: absolute;
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
        }
        #text {
          opacity: 0;
        }
        a, a:hover {
          color: white;
        }
        button {
          padding: 9px 13px;
          border-radius: 2px;
          font-family: sans-serif;
          font-size: 1.2em;
          cursor: pointer;
          background-color: white;
          color: black;
        }
      </style>

  </head>

  <body>
    
    <div id="cover">
      <div id="text">
        <h1>Thunderstorm in New York</h1>
        <p>ðŸŽ¥: <a href="https://www.youtube.com/watch?v=BOa0zQBRs_M" target="_blank">Nomadic Ambience</a></p>
        <p>ðŸŽ§: <a href="https://open.spotify.com/artist/5iTOaSGMZgJ1U8k6NjmzTx" target="_blank">Swardy</a></p>
        <p><button>Walk</button></p>
      </div>
    </div>

    <div id="videoplayer"></div>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>

    <script>
      var VIDEO_ID = 'BOa0zQBRs_M'

      var isTouchDevice = 'ontouchstart' in document.documentElement;
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;

      function onYouTubeIframeAPIReady() {
        player = new YT.Player('videoplayer', {
          height: '100%',
          width: '100%',
          videoId: VIDEO_ID,
          events: {
            'onReady': onVideoPlayerReady,
            'onStateChange': onVideoPlayerStateChange
          }
        });
      }

      function fadeOut() {
        $('#text').fadeTo(1000, 0);
        $('#cover').fadeTo(10000, 0.01);
      }

      function playAudio() {
        var audioplayer = document.getElementById('audioplayer');
        audioplayer.play();
        audioplayer.volume = 1.0;
        audioplayer.oncanplay = null;
      }

      function onAudioPlayerReady() {
        playAudio();
      }

      function onVideoPlayerReady(event) {
        $('#text').fadeTo(1000, 0.7);
        event.target.seekTo(0)
        event.target.setVolume(0);
        event.target.playVideo(20);
      }

      var playedAudio = false;
      function onVideoPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !playedAudio) {
          playAudio()
        }
      }

      $(function() {
        // $('#text').html(isTouchDevice ? 'Tap to take a walk' : 'Click to take a walk')
        $('button, #cover').click(function() {
          playAudio()
        })
      })

    </script>

    <audio 
      id="audioplayer" 
      autoplay 
      loop 
      oncanplay="onAudioPlayerReady()"
      onplay="fadeOut()"
    >
      <source autoplay loop src="./Swardy - Here On My Own - 03 I Remember Maine.mp3">
    </audio>

  </body>
</html>